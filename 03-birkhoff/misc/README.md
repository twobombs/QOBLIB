# Miscellaneous

## How to read the files
In Julia:
```julia
using JSON3

data = JSON3.read("file_name.json")
D = data[id].scaled_doubly_stochastic_matrix
D = reshape(D,n,n)
```

In Python:
```python
import json
import numpy as np 

f = open("file_name.json")
data = json.load(f)
D = data[id]['scaled_doubly_stochastic_matrix']
D = np.array(D)
D = np.reshape(D, (n,n))
```

## Generating LP Files

Run

```bash
./gen_lp.sh <start_integer> <end_integer>
```

where start and end integer tell the script which instances you want to convert, e.g., start_integer = 3 and end_integer = 4 generates all lp files for sparse and dense instances of size 3 and 4. 

Note, that ZIMPL must be on your system. 
You can also set the path directly in line 51 and 58 in the bash file. 

The solutions are dependent on the order the permutations are produced in. 

## Converting solutions to JSON
With `python --version >= Python 3.7`, run
```bash
python sol2json.py <solution_dir> <output_dir>
```
where `solution_dir` must be of format `path/to/<n>_{sparse|dense}/` and
`output_dir` the directory in which to put the resulting JSON file.

## Converting JSON to Markdown tables
Run 
```bash
python json2mdtable.py <outfile>
```
where `outfile` will be the resulting Markdown document.
With this, we created `solutions/README.md`.

## Convert JSON to ZIMPL matrix format

Run
```bash
python script.py <json_file> <matrix_dimension> <output_directory>
```
where `json_file` is the file containing the instances, `matrix_dimension` is an integer giving the dimension of the matrices in that file and `output_directory` is the directory the resulting files will be written to.

## Generating permutations

We provide a little C program that generates permutations. 
These are used to generate the LP models with ZIMPL.
The ZIMPL formulation is dependent on the enumeration order of permutations. 
Please don't delete the `p<n>.dat` files.

## Permutation Matrix Mapping

We associate a permutation
$\pi = (\pi_1, \pi_2,..., \pi_n)$
with a permutation matrix
$P = (p_{ij}) \in \{0,1\}^{n\times n}$
in **_column_**-based manner, i.e., for the **_column_**-index $j=1,2,...,n$:
$$p_{ij} = 1 \Leftrightarrow i=\pi_j.$$
This mapping is bijective.

Example for $n=3$:
$$
    \pi = (3,1,2) \quad\longleftrightarrow\quad
    P =
    \left(
    \begin{matrix}
        0 & 1 & 0 \\
        0 & 0 & 1 \\
        1 & 0 & 0 \\
    \end{matrix}
    \right)
$$

To allow usage in ZIMPL, all permutations for $n \in \mathbb{N}$ are generated by `genperm.c`
and written to file `p<n>.dat` by `gen_lp.sh`.

Additionally, we associate each permutation $\pi = (\pi_1, \pi_2, ..., \pi_n)$
with a unique integer $m \in \{1,...,n!\}$ simply by the line number of the
corresponding permutation in `p<n>.dat`
